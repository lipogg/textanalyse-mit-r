<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 Exkurs: Daten beschaffen | Textanalyse mit R für die Geisteswissenschaften</title>
  <meta name="description" content="<p>This website is built using a minimal example of using the bookdown package to write a book. The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="11 Exkurs: Daten beschaffen | Textanalyse mit R für die Geisteswissenschaften" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This website is built using a minimal example of using the bookdown package to write a book. The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="lipogg/textanalyse-mit-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 Exkurs: Daten beschaffen | Textanalyse mit R für die Geisteswissenschaften" />
  
  <meta name="twitter:description" content="<p>This website is built using a minimal example of using the bookdown package to write a book. The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="word-embeddings-und-ner.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><img src="images/logo.png" width="260"></a></li> 

<li class="divider"></li>
<li class="chapter" data-level="" data-path=""><a href="#%C3%BCber-diesen-kurs"><i class="fa fa-check"></i>Über diesen Kurs</a></li>
<li class="chapter" data-level="" data-path="warum-r.html"><a href="warum-r.html"><i class="fa fa-check"></i>Warum R?</a>
<ul>
<li class="chapter" data-level="" data-path=""><a href="#was-ist-r-%C3%BCberhaupt"><i class="fa fa-check"></i>Was ist R überhaupt?</a></li>
<li class="chapter" data-level="" data-path="warum-r.html"><a href="warum-r.html#r-thirst-traps"><i class="fa fa-check"></i>R Thirst Traps</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="seminarplan.html"><a href="seminarplan.html"><i class="fa fa-check"></i>Seminarplan</a></li>
<li class="chapter" data-level="" data-path="lernziele.html"><a href="lernziele.html"><i class="fa fa-check"></i>Lernziele</a></li>
<li class="chapter" data-level="" data-path="organisatorisches.html"><a href="organisatorisches.html"><i class="fa fa-check"></i>Organisatorisches</a></li>
<li class="chapter" data-level="" data-path="hilfe.html"><a href="hilfe.html"><i class="fa fa-check"></i>Hilfe!!</a></li>
<li class="chapter" data-level="" data-path="installation-und-setup.html"><a href="installation-und-setup.html"><i class="fa fa-check"></i>Installation und Setup</a></li>
<li class="chapter" data-level="" data-path="orientierung-im-rstudio.html"><a href="orientierung-im-rstudio.html"><i class="fa fa-check"></i>Orientierung im RStudio</a></li>
<li class="chapter" data-level="1" data-path="r-basics-i-datentypen-variablen-und-operatoren.html"><a href="r-basics-i-datentypen-variablen-und-operatoren.html"><i class="fa fa-check"></i><b>1</b> R Basics I: Datentypen, Variablen und Operatoren</a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-basics-i-datentypen-variablen-und-operatoren.html"><a href="r-basics-i-datentypen-variablen-und-operatoren.html#grundlegende-begriffe"><i class="fa fa-check"></i><b>1.1</b> Grundlegende Begriffe</a></li>
<li class="chapter" data-level="1.2" data-path="r-basics-i-datentypen-variablen-und-operatoren.html"><a href="r-basics-i-datentypen-variablen-und-operatoren.html#style-guide"><i class="fa fa-check"></i><b>1.2</b> Style Guide</a></li>
<li class="chapter" data-level="1.3" data-path="r-basics-i-datentypen-variablen-und-operatoren.html"><a href="r-basics-i-datentypen-variablen-und-operatoren.html#kommentare"><i class="fa fa-check"></i><b>1.3</b> Kommentare</a></li>
<li class="chapter" data-level="1.4" data-path="r-basics-i-datentypen-variablen-und-operatoren.html"><a href="r-basics-i-datentypen-variablen-und-operatoren.html#datentypen"><i class="fa fa-check"></i><b>1.4</b> Datentypen</a></li>
<li class="chapter" data-level="1.5" data-path="r-basics-i-datentypen-variablen-und-operatoren.html"><a href="r-basics-i-datentypen-variablen-und-operatoren.html#operatoren"><i class="fa fa-check"></i><b>1.5</b> Operatoren</a></li>
<li class="chapter" data-level="1.6" data-path="r-basics-i-datentypen-variablen-und-operatoren.html"><a href="r-basics-i-datentypen-variablen-und-operatoren.html#variablen"><i class="fa fa-check"></i><b>1.6</b> Variablen</a></li>
<li class="chapter" data-level="1.7" data-path="11-Webscraping-APIs.html"><a href="#operatorpr%C3%A4zedenz"><i class="fa fa-check"></i><b>1.7</b> Operatorpräzedenz</a></li>
<li class="chapter" data-level="" data-path="r-basics-i-datentypen-variablen-und-operatoren.html"><a href="r-basics-i-datentypen-variablen-und-operatoren.html#quellen"><i class="fa fa-check"></i>Quellen</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html"><i class="fa fa-check"></i><b>2</b> R Basics II: Datenstrukturen</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#grundlegende-begriffe-1"><i class="fa fa-check"></i><b>2.1</b> Grundlegende Begriffe</a></li>
<li class="chapter" data-level="2.2" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#vektoren"><i class="fa fa-check"></i><b>2.2</b> Vektoren</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#vektoren-erstellen"><i class="fa fa-check"></i><b>2.2.1</b> Vektoren erstellen</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#sets-mengen"><i class="fa fa-check"></i><b>2.2.2</b> Sets (Mengen)</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#named-vectors"><i class="fa fa-check"></i><b>2.2.3</b> Named Vectors</a></li>
<li class="chapter" data-level="2.2.4" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#faktoren"><i class="fa fa-check"></i><b>2.2.4</b> Faktoren</a></li>
<li class="chapter" data-level="2.2.5" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#operationen-auf-vektoren"><i class="fa fa-check"></i><b>2.2.5</b> Operationen auf Vektoren</a></li>
<li class="chapter" data-level="2.2.6" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#vektorisierung"><i class="fa fa-check"></i><b>2.2.6</b> Vektorisierung</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#listen"><i class="fa fa-check"></i><b>2.3</b> Listen</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#listen-erstellen"><i class="fa fa-check"></i><b>2.3.1</b> Listen erstellen</a></li>
<li class="chapter" data-level="2.3.2" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#operationen-auf-listen"><i class="fa fa-check"></i><b>2.3.2</b> Operationen auf Listen</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#auf-einen-blick-vektoren-vs-benannte-vektoren-vs-faktoren-vs-listen"><i class="fa fa-check"></i><b>2.4</b> Auf einen Blick: Vektoren vs benannte Vektoren vs Faktoren vs Listen</a></li>
<li class="chapter" data-level="2.5" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#matrizen"><i class="fa fa-check"></i><b>2.5</b> Matrizen</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#matrizen-erstellen"><i class="fa fa-check"></i><b>2.5.1</b> Matrizen erstellen</a></li>
<li class="chapter" data-level="2.5.2" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#operationen-auf-matrizen"><i class="fa fa-check"></i><b>2.5.2</b> Operationen auf Matrizen</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#arrays"><i class="fa fa-check"></i><b>2.6</b> Arrays</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#operationen-auf-arrays"><i class="fa fa-check"></i><b>2.6.1</b> Operationen auf Arrays</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#dataframes"><i class="fa fa-check"></i><b>2.7</b> Dataframes</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#dataframes-erstellen"><i class="fa fa-check"></i><b>2.7.1</b> Dataframes erstellen</a></li>
<li class="chapter" data-level="2.7.2" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#operationen-auf-dataframes"><i class="fa fa-check"></i><b>2.7.2</b> Operationen auf Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#auf-einen-blick-matrizen-vs-arrays-vs-dataframes"><i class="fa fa-check"></i><b>2.8</b> Auf einen Blick: Matrizen vs Arrays vs Dataframes</a></li>
<li class="chapter" data-level="2.9" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#datenstrukturen-untersuchen"><i class="fa fa-check"></i><b>2.9</b> Datenstrukturen untersuchen</a></li>
<li class="chapter" data-level="2.10" data-path="11-Webscraping-APIs.html"><a href="#fehlende-und-ung%C3%BCltige-werte-in-datenstrukturen"><i class="fa fa-check"></i><b>2.10</b> Fehlende und ungültige Werte in Datenstrukturen</a></li>
<li class="chapter" data-level="2.11" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#der-mitgliedschaftsoperator-in"><i class="fa fa-check"></i><b>2.11</b> Der Mitgliedschaftsoperator %in%</a></li>
<li class="chapter" data-level="2.12" data-path="11-Webscraping-APIs.html"><a href="#unver%C3%A4nderbarkeit-von-objekten-in-r"><i class="fa fa-check"></i><b>2.12</b> Unveränderbarkeit von Objekten in R</a></li>
<li class="chapter" data-level="" data-path="r-basics-ii-datenstrukturen.html"><a href="r-basics-ii-datenstrukturen.html#quellen-1"><i class="fa fa-check"></i>Quellen</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-basics-iii-kontrollstrukturen.html"><a href="r-basics-iii-kontrollstrukturen.html"><i class="fa fa-check"></i><b>3</b> R Basics III: Kontrollstrukturen</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-basics-iii-kontrollstrukturen.html"><a href="r-basics-iii-kontrollstrukturen.html#grundlegende-begriffe-2"><i class="fa fa-check"></i><b>3.1</b> Grundlegende Begriffe</a></li>
<li class="chapter" data-level="3.2" data-path="r-basics-iii-kontrollstrukturen.html"><a href="r-basics-iii-kontrollstrukturen.html#bedingte-anweisungen"><i class="fa fa-check"></i><b>3.2</b> Bedingte Anweisungen</a></li>
<li class="chapter" data-level="3.3" data-path="r-basics-iii-kontrollstrukturen.html"><a href="r-basics-iii-kontrollstrukturen.html#verzweigungen"><i class="fa fa-check"></i><b>3.3</b> Verzweigungen</a></li>
<li class="chapter" data-level="3.4" data-path="r-basics-iii-kontrollstrukturen.html"><a href="r-basics-iii-kontrollstrukturen.html#while-schleifen"><i class="fa fa-check"></i><b>3.4</b> while-Schleifen</a></li>
<li class="chapter" data-level="3.5" data-path="r-basics-iii-kontrollstrukturen.html"><a href="r-basics-iii-kontrollstrukturen.html#for-schleifen"><i class="fa fa-check"></i><b>3.5</b> for-Schleifen</a></li>
<li class="chapter" data-level="3.6" data-path="r-basics-iii-kontrollstrukturen.html"><a href="r-basics-iii-kontrollstrukturen.html#schleifen-abbrechen"><i class="fa fa-check"></i><b>3.6</b> Schleifen abbrechen</a></li>
<li class="chapter" data-level="" data-path="r-basics-iii-kontrollstrukturen.html"><a href="r-basics-iii-kontrollstrukturen.html#quellen-2"><i class="fa fa-check"></i>Quellen</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html"><i class="fa fa-check"></i><b>4</b> R Basics IV: Funktionen und Pakete</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#grundlegende-begriffe-3"><i class="fa fa-check"></i><b>4.1</b> Grundlegende Begriffe</a></li>
<li class="chapter" data-level="4.2" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#was-sind-funktionen"><i class="fa fa-check"></i><b>4.2</b> Was sind Funktionen?</a></li>
<li class="chapter" data-level="4.3" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#funktionen-definieren"><i class="fa fa-check"></i><b>4.3</b> Funktionen definieren</a></li>
<li class="chapter" data-level="4.4" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#funktionen-aufrufen"><i class="fa fa-check"></i><b>4.4</b> Funktionen aufrufen</a></li>
<li class="chapter" data-level="4.5" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#funktionen-verstehen"><i class="fa fa-check"></i><b>4.5</b> Funktionen verstehen</a></li>
<li class="chapter" data-level="4.6" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#wozu-werden-funktionen-verwendet"><i class="fa fa-check"></i><b>4.6</b> Wozu werden Funktionen verwendet?</a></li>
<li class="chapter" data-level="4.7" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#schleifen-ersetzen-mithilfe-von-funktionen"><i class="fa fa-check"></i><b>4.7</b> Schleifen ersetzen mithilfe von Funktionen</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#die-apply-funktionen"><i class="fa fa-check"></i><b>4.7.1</b> Die Apply-Funktionen</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="11-Webscraping-APIs.html"><a href="#g%C3%BCltigkeit-der-funktionsargumente-%C3%BCberpr%C3%BCfen"><i class="fa fa-check"></i><b>4.8</b> Gültigkeit der Funktionsargumente überprüfen</a></li>
<li class="chapter" data-level="4.9" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#funktionsumgebung-und-sichtbarkeitsbereich-von-variablen"><i class="fa fa-check"></i><b>4.9</b> Funktionsumgebung und Sichtbarkeitsbereich von Variablen</a></li>
<li class="chapter" data-level="4.10" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#was-sind-pakete"><i class="fa fa-check"></i><b>4.10</b> Was sind Pakete?</a></li>
<li class="chapter" data-level="4.11" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#pakete-installieren"><i class="fa fa-check"></i><b>4.11</b> Pakete installieren</a></li>
<li class="chapter" data-level="4.12" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#pakete-laden"><i class="fa fa-check"></i><b>4.12</b> Pakete laden</a></li>
<li class="chapter" data-level="4.13" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#wozu-werden-pakete-verwendet"><i class="fa fa-check"></i><b>4.13</b> Wozu werden Pakete verwendet?</a></li>
<li class="chapter" data-level="4.14" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#welche-pakete-gibt-es-denn-alles"><i class="fa fa-check"></i><b>4.14</b> Welche Pakete gibt es denn alles?</a></li>
<li class="chapter" data-level="" data-path="r-basics-iv-funktionen-und-pakete.html"><a href="r-basics-iv-funktionen-und-pakete.html#quellen-3"><i class="fa fa-check"></i>Quellen</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html"><i class="fa fa-check"></i><b>5</b> Textanalyse I: Korpus, Tokens, Daten und Dateien</a>
<ul>
<li class="chapter" data-level="5.1" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#was-sind-eigentlich-daten"><i class="fa fa-check"></i><b>5.1</b> Was sind eigentlich Daten?</a></li>
<li class="chapter" data-level="5.2" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#korpus-tokens-und-types"><i class="fa fa-check"></i><b>5.2</b> Korpus, Tokens und Types</a></li>
<li class="chapter" data-level="5.3" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#vom-korpus-zur-analyse"><i class="fa fa-check"></i><b>5.3</b> Vom Korpus zur Analyse</a></li>
<li class="chapter" data-level="5.4" data-path="11-Webscraping-APIs.html"><a href="#%C3%BCberblick-textanalyse-mit-quanteda"><i class="fa fa-check"></i><b>5.4</b> Überblick: Textanalyse mit Quanteda</a></li>
<li class="chapter" data-level="5.5" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#textdateien-einlesen"><i class="fa fa-check"></i><b>5.5</b> Textdateien einlesen</a></li>
<li class="chapter" data-level="5.6" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#character-encodings"><i class="fa fa-check"></i><b>5.6</b> Character Encodings</a></li>
<li class="chapter" data-level="5.7" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#quanteda-corpus-objekte"><i class="fa fa-check"></i><b>5.7</b> Quanteda corpus-Objekte</a></li>
<li class="chapter" data-level="5.8" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#quanteda-tokens-objekte"><i class="fa fa-check"></i><b>5.8</b> Quanteda tokens-Objekte</a></li>
<li class="chapter" data-level="5.9" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#quanteda-dfm-objekte"><i class="fa fa-check"></i><b>5.9</b> Quanteda DFM-Objekte</a></li>
<li class="chapter" data-level="5.10" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#daten-schreiben"><i class="fa fa-check"></i><b>5.10</b> Daten schreiben</a></li>
<li class="chapter" data-level="" data-path="textanalyse-i-korpus-tokens-daten-und-dateien.html"><a href="textanalyse-i-korpus-tokens-daten-und-dateien.html#quellen-4"><i class="fa fa-check"></i>Quellen</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regex.html"><a href="regex.html"><i class="fa fa-check"></i><b>6</b> Exkurs: Reguläre Ausdrücke</a>
<ul>
<li class="chapter" data-level="6.1" data-path="11-Webscraping-APIs.html"><a href="#was-sind-regul%C3%A4re-ausdr%C3%BCcke"><i class="fa fa-check"></i><b>6.1</b> Was sind reguläre Ausdrücke?</a></li>
<li class="chapter" data-level="6.2" data-path="regex.html"><a href="regex.html#regex-r"><i class="fa fa-check"></i><b>6.2</b> Reguläre Ausdrücke in R</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="regex.html"><a href="regex.html#r-base-funktionen"><i class="fa fa-check"></i><b>6.2.1</b> R Base Funktionen</a></li>
<li class="chapter" data-level="6.2.2" data-path="regex.html"><a href="regex.html#spezielle-pakete-stringr"><i class="fa fa-check"></i><b>6.2.2</b> Spezielle Pakete: stringr</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="regex.html"><a href="regex.html#regex-syntax"><i class="fa fa-check"></i><b>6.3</b> Regex Syntax</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="regex.html"><a href="regex.html#basics-syntax"><i class="fa fa-check"></i><b>6.3.1</b> Basics Syntax</a></li>
<li class="chapter" data-level="6.3.2" data-path="regex.html"><a href="regex.html#zeichenklassen"><i class="fa fa-check"></i><b>6.3.2</b> Zeichenklassen</a></li>
<li class="chapter" data-level="6.3.3" data-path="regex.html"><a href="regex.html#lookarounds"><i class="fa fa-check"></i><b>6.3.3</b> Lookarounds</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="11-Webscraping-APIs.html"><a href="#regex-f%C3%BCr-nicht-lateinische-schriften"><i class="fa fa-check"></i><b>6.4</b> Regex für nicht-lateinische Schriften</a></li>
<li class="chapter" data-level="" data-path=""><a href="#weiterf%C3%BChrende-links"><i class="fa fa-check"></i>Weiterführende Links</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="textanalyse-ii-preprocessing.html"><a href="textanalyse-ii-preprocessing.html"><i class="fa fa-check"></i><b>7</b> Textanalyse II: Preprocessing</a>
<ul>
<li class="chapter" data-level="7.1" data-path="textanalyse-ii-preprocessing.html"><a href="textanalyse-ii-preprocessing.html#tokenisieren-und-segmentieren"><i class="fa fa-check"></i><b>7.1</b> Tokenisieren und segmentieren</a></li>
<li class="chapter" data-level="7.2" data-path="11-Webscraping-APIs.html"><a href="#regul%C3%A4re-ausdr%C3%BCcke-im-preprocessing"><i class="fa fa-check"></i><b>7.2</b> Reguläre Ausdrücke im Preprocessing</a></li>
<li class="chapter" data-level="7.3" data-path="textanalyse-ii-preprocessing.html"><a href="textanalyse-ii-preprocessing.html#satzzeichen-zahlen-und-sonderzeichen-entfernen"><i class="fa fa-check"></i><b>7.3</b> Satzzeichen, Zahlen und Sonderzeichen entfernen</a></li>
<li class="chapter" data-level="7.4" data-path="11-Webscraping-APIs.html"><a href="#stoppw%C3%B6rter-entfernen"><i class="fa fa-check"></i><b>7.4</b> Stoppwörter entfernen</a></li>
<li class="chapter" data-level="7.5" data-path="11-Webscraping-APIs.html"><a href="#gro%C3%9F--und-kleinschreibung-anpassen"><i class="fa fa-check"></i><b>7.5</b> Groß- und Kleinschreibung anpassen</a></li>
<li class="chapter" data-level="7.6" data-path="textanalyse-ii-preprocessing.html"><a href="textanalyse-ii-preprocessing.html#stemming"><i class="fa fa-check"></i><b>7.6</b> Stemming</a></li>
<li class="chapter" data-level="7.7" data-path="textanalyse-ii-preprocessing.html"><a href="textanalyse-ii-preprocessing.html#lemmatisierung"><i class="fa fa-check"></i><b>7.7</b> Lemmatisierung</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="textanalyse-ii-preprocessing.html"><a href="textanalyse-ii-preprocessing.html#methode-1-lemmatisierung-mit-lexikon"><i class="fa fa-check"></i><b>7.7.1</b> Methode 1: Lemmatisierung mit Lexikon</a></li>
<li class="chapter" data-level="7.7.2" data-path="textanalyse-ii-preprocessing.html"><a href="textanalyse-ii-preprocessing.html#methode-2-lemmatisierung-mit-udpipe"><i class="fa fa-check"></i><b>7.7.2</b> Methode 2: Lemmatisierung mit UDPipe</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="textanalyse-ii-preprocessing.html"><a href="textanalyse-ii-preprocessing.html#quellen-5"><i class="fa fa-check"></i>Quellen</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html"><i class="fa fa-check"></i><b>8</b> Textanalyse III: Wortfrequenzanalysen</a>
<ul>
<li class="chapter" data-level="8.1" data-path="11-Webscraping-APIs.html"><a href="#m%C3%A4rchenkorpus-einlesen-und-pakete-installieren"><i class="fa fa-check"></i><b>8.1</b> Märchenkorpus einlesen und Pakete installieren</a></li>
<li class="chapter" data-level="8.2" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html#corpus-objekt-erstellen-und-erste-preprocessingschritte"><i class="fa fa-check"></i><b>8.2</b> Corpus-Objekt erstellen und erste Preprocessingschritte</a></li>
<li class="chapter" data-level="8.3" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html#frequencies"><i class="fa fa-check"></i><b>8.3</b> Worthäufigkeiten verstehen: absolute und relative Häufigkeiten</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="11-Webscraping-APIs.html"><a href="#absolute-h%C3%A4ufigkeiten-und-das-zipfsche-gesetz"><i class="fa fa-check"></i><b>8.3.1</b> Absolute Häufigkeiten und das Zipf’sche Gesetz</a></li>
<li class="chapter" data-level="8.3.2" data-path="11-Webscraping-APIs.html"><a href="#absolute-h%C3%A4ufigkeiten-und-lemmata"><i class="fa fa-check"></i><b>8.3.2</b> Absolute Häufigkeiten und Lemmata</a></li>
<li class="chapter" data-level="8.3.3" data-path="11-Webscraping-APIs.html"><a href="#relative-h%C3%A4ufigkeiten-und-tf-idf"><i class="fa fa-check"></i><b>8.3.3</b> Relative Häufigkeiten und TF-IDF</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html#cooccurrences"><i class="fa fa-check"></i><b>8.4</b> Wörter im Kontext: gemeinsames Vorkommen von Wörtern</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html#keywords-in-context-kwic"><i class="fa fa-check"></i><b>8.4.1</b> Keywords in Context (KWIC)</a></li>
<li class="chapter" data-level="8.4.2" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html#n-gramme"><i class="fa fa-check"></i><b>8.4.2</b> N-Gramme</a></li>
<li class="chapter" data-level="8.4.3" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html#kookkurrenzen"><i class="fa fa-check"></i><b>8.4.3</b> Kookkurrenzen</a></li>
<li class="chapter" data-level="8.4.4" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html#interpretation"><i class="fa fa-check"></i><b>8.4.4</b> Was bedeutet das gemeinsame Vorkommen zweier Wörter?</a></li>
<li class="chapter" data-level="8.4.5" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html#zwischenfazit"><i class="fa fa-check"></i><b>8.4.5</b> Zwischenfazit</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="textanalyse-iii-wortfrequenzanalysen.html"><a href="textanalyse-iii-wortfrequenzanalysen.html#quellen-6"><i class="fa fa-check"></i>Quellen</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html"><i class="fa fa-check"></i><b>9</b> POS Tagging und Dependency Parsing</a>
<ul>
<li class="chapter" data-level="9.1" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html#recap-udpipe"><i class="fa fa-check"></i><b>9.1</b> Recap UDPipe</a></li>
<li class="chapter" data-level="9.2" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html#part-of-speech-tagging-mit-udpipe"><i class="fa fa-check"></i><b>9.2</b> Part of Speech Tagging mit UDpipe</a></li>
<li class="chapter" data-level="9.3" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html#dependency-parsing-mit-udpipe"><i class="fa fa-check"></i><b>9.3</b> Dependency Parsing mit UDPipe</a></li>
<li class="chapter" data-level="9.4" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html#beispiel"><i class="fa fa-check"></i><b>9.4</b> Beispielanalyse: Märchen</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html#korpus-einlesen-und-preprocessing"><i class="fa fa-check"></i><b>9.4.1</b> Korpus einlesen und Preprocessing</a></li>
<li class="chapter" data-level="9.4.2" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html#analyse-mit-pos-tags"><i class="fa fa-check"></i><b>9.4.2</b> Analyse mit POS Tags</a></li>
<li class="chapter" data-level="9.4.3" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html#analyse-mit-dependency-relations"><i class="fa fa-check"></i><b>9.4.3</b> Analyse mit Dependency Relations</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html#fazit"><i class="fa fa-check"></i><b>9.5</b> Fazit</a></li>
<li class="chapter" data-level="" data-path="pos-tagging-und-dependency-parsing.html"><a href="pos-tagging-und-dependency-parsing.html#quellen-7"><i class="fa fa-check"></i>Quellen</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="word-embeddings-und-ner.html"><a href="word-embeddings-und-ner.html"><i class="fa fa-check"></i><b>10</b> Word Embeddings und NER</a>
<ul>
<li class="chapter" data-level="10.1" data-path="word-embeddings-und-ner.html"><a href="word-embeddings-und-ner.html#word-embeddings"><i class="fa fa-check"></i><b>10.1</b> Word Embeddings</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="word-embeddings-und-ner.html"><a href="word-embeddings-und-ner.html#count-based-word-embeddings-mit-quanteda-und-pmi-werten"><i class="fa fa-check"></i><b>10.1.1</b> Count-Based Word Embeddings mit Quanteda und PMI-Werten</a></li>
<li class="chapter" data-level="10.1.2" data-path="word-embeddings-und-ner.html"><a href="word-embeddings-und-ner.html#prediction-based-static-word-embeddings-mit-quanteda-und-glove"><i class="fa fa-check"></i><b>10.1.2</b> Prediction-Based Static Word Embeddings mit Quanteda und GloVe</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="word-embeddings-und-ner.html"><a href="word-embeddings-und-ner.html#named-entity-recognition-ner"><i class="fa fa-check"></i><b>10.2</b> Named Entity Recognition (NER)</a></li>
<li class="chapter" data-level="10.3" data-path="word-embeddings-und-ner.html"><a href="word-embeddings-und-ner.html#beispiel-mit-spacy-spacyr"><i class="fa fa-check"></i><b>10.3</b> Beispiel mit SpaCy / Spacyr</a></li>
<li class="chapter" data-level="10.4" data-path="word-embeddings-und-ner.html"><a href="word-embeddings-und-ner.html#beispiel-mit-flair-flair"><i class="fa fa-check"></i><b>10.4</b> Beispiel mit Flair / FlaiR</a></li>
<li class="chapter" data-level="10.5" data-path="word-embeddings-und-ner.html"><a href="word-embeddings-und-ner.html#vergleich-und-ausblick"><i class="fa fa-check"></i><b>10.5</b> Vergleich und Ausblick</a></li>
<li class="chapter" data-level="" data-path="word-embeddings-und-ner.html"><a href="word-embeddings-und-ner.html#quellen-8"><i class="fa fa-check"></i>Quellen</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="exkurs-daten-beschaffen.html"><a href="exkurs-daten-beschaffen.html"><i class="fa fa-check"></i><b>11</b> Exkurs: Daten beschaffen</a>
<ul>
<li class="chapter" data-level="11.1" data-path="exkurs-daten-beschaffen.html"><a href="exkurs-daten-beschaffen.html#beispiel-dracor-datenextraktion-mit-api"><i class="fa fa-check"></i><b>11.1</b> Beispiel Dracor: Datenextraktion mit API</a></li>
<li class="chapter" data-level="11.2" data-path="exkurs-daten-beschaffen.html"><a href="exkurs-daten-beschaffen.html#beispiel-projekt-gutenberg-web-scraping"><i class="fa fa-check"></i><b>11.2</b> Beispiel Projekt Gutenberg: Web Scraping</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Textanalyse mit R für die Geisteswissenschaften</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exkurs-daten-beschaffen" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">11</span> Exkurs: Daten beschaffen<a href="exkurs-daten-beschaffen.html#exkurs-daten-beschaffen" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Wenn ihr für ein Forschungsprojekt ein großes Korpus von Texten zusammenstellen müsst, kann das ohne die richtigen Werkzeuge sehr lange dauern. Wenn ihr beispielsweise 200 Plaintext-Dateien von <a href="https://de.wikisource.org">wikisource.org</a> manuell herunterladen wollt, müsstet ihr jeden Text erst suchen, dann jedes Mal auf den “Herunterladen”-Button klicken und hier die Parameter für den Download jedes Mal erneut auswählen. Es gibt jedoch verschiedene Methoden, um diese Arbeit zu erleichtern:</p>
<ol style="list-style-type: decimal">
<li>API der Website abrufen: Vielleicht verfügt die Website über eine Schnittstelle, eine sogenannte API, die ihr anzapfen könnt, um direkt die Dateien herunterzuladen. API steht für <strong>A</strong>pplication <strong>P</strong>rogramming <strong>I</strong>nterface und wird verwendet, um anderen den Zugriff auf Daten oder Funktionalitäten einer Anwendung zu ermöglichen, ohne dabei den Quellcode zu offenbaren. Die Inhalte können mit einer simplen Abfrage (“GET-Request”) über das Internet-Protokoll HTTP aus R heraus abgerufen werden.</li>
</ol>
<ul>
<li>Beispiele: <a href="https://dracor.org/doc/api">dracor.org</a>, <a href="https://chroniclingamerica.loc.gov/about/api/">Chronicling America Archive</a></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Web Scraping: Wenn es keine API gibt, können Dateien oder der Textinhalt einer oder mehrerer Webseiten mithilfe von Web Scraping-Strategien extrahiert und heruntergeladen werden. Um diese Strategien anzuwenden, müsst ihr euch mit dem Quellcode der Website vertraut machen. Webseiten sind im Grunde einfach HTML-Dokumente, die irgendwo auf einem Server liegen, also auf einem Computer, auf der Webhosting-Software läuft. HTML ist eine spezielle Sprache, welche zur Beschreibung der Seitenstruktur verwendet wird. Sogenannte HTML-Elemente werden verwendet, um zu beschreiben, wo der Textinhalt der Webseite, aber auch Links zu Unterseiten und zu Ressourcen wie Bilddateien angezeigt werden sollen. Sobald ihr verstanden habt, welche HTML-Elemente die Inhalte beschreiben, die euch interessieren, könnt ihr aus R heraus den Inhalt dieser Elemente extrahieren.</li>
</ol>
<ul>
<li>Beispiele: <a href="https://www.projekt-gutenberg.org/buechner/briefe1/titlepage.html">projekt-gutenberg.org</a>, <a href="https://de.wikisource.org/wiki/Der_Zauberstein">wikisource.org</a></li>
</ul>
<div id="beispiel-dracor-datenextraktion-mit-api" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Beispiel Dracor: Datenextraktion mit API<a href="exkurs-daten-beschaffen.html#beispiel-dracor-datenextraktion-mit-api" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Die Dramen-Datenbank Dracor verfügt über eine <a href="https://dracor.org/doc/api">gut dokumentierte API</a>, welche den Zugriff auf verschiedene Inhalte ermöglicht, beispielsweise auf Metadaten zu Stücken oder ganzen Korpora, auf den Sprechtext der Figuren im Plaintext-Format und auch auf ganze, in XML-TEI (-&gt; nächste Woche!) ausgezeichnete Stücke. Die Abfrage dieser Daten für einzelne Stücke ist direkt über das Webinterface möglich. Um Daten zu mehreren Stücken zu bekommen, müssen wir ein Skript schreiben, das die API abruft und die URL für die API-Abfrage iterativ (also in mehreren Durchläufen) für jedes der uns interessierenden Stücke anpasst.</p>
<p>Für eine Abfrage aller Sprechtexte in Stücken von Goethe könnte ein Skript beispielsweise so aussehen:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="exkurs-daten-beschaffen.html#cb1-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;jsonlite&quot;</span>, <span class="st">&quot;httr&quot;</span>, <span class="st">&quot;purrr&quot;</span>))</span>
<span id="cb1-2"><a href="exkurs-daten-beschaffen.html#cb1-2" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-3"><a href="exkurs-daten-beschaffen.html#cb1-3" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-4"><a href="exkurs-daten-beschaffen.html#cb1-4" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-5"><a href="exkurs-daten-beschaffen.html#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="exkurs-daten-beschaffen.html#cb1-6" tabindex="-1"></a>corpusname <span class="ot">&lt;-</span> <span class="st">&quot;ger&quot;</span></span>
<span id="cb1-7"><a href="exkurs-daten-beschaffen.html#cb1-7" tabindex="-1"></a>base_url <span class="ot">&lt;-</span> <span class="st">&quot;https://dracor.org/api&quot;</span></span>
<span id="cb1-8"><a href="exkurs-daten-beschaffen.html#cb1-8" tabindex="-1"></a>author <span class="ot">&lt;-</span> <span class="st">&quot;goethe&quot;</span></span>
<span id="cb1-9"><a href="exkurs-daten-beschaffen.html#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="exkurs-daten-beschaffen.html#cb1-10" tabindex="-1"></a><span class="do">## 1. Informationen zu allen Stücken aus dem deutschsprachigen Dracor Korpus abfragen</span></span>
<span id="cb1-11"><a href="exkurs-daten-beschaffen.html#cb1-11" tabindex="-1"></a><span class="co"># Abfrage-URL für das ausgewählte Korpus vorbereiten</span></span>
<span id="cb1-12"><a href="exkurs-daten-beschaffen.html#cb1-12" tabindex="-1"></a>full_url <span class="ot">&lt;-</span> <span class="fu">paste</span>(base_url, <span class="st">&quot;/corpora/&quot;</span>, corpusname, <span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb1-13"><a href="exkurs-daten-beschaffen.html#cb1-13" tabindex="-1"></a>full_url <span class="co">#zum Überprüfen in der Konsole ausgeben lassen</span></span>
<span id="cb1-14"><a href="exkurs-daten-beschaffen.html#cb1-14" tabindex="-1"></a><span class="co"># API call </span></span>
<span id="cb1-15"><a href="exkurs-daten-beschaffen.html#cb1-15" tabindex="-1"></a>api_call <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(full_url)</span>
<span id="cb1-16"><a href="exkurs-daten-beschaffen.html#cb1-16" tabindex="-1"></a>?GET <span class="co">#Informationen zur Funktion GET anzeigen lassen</span></span>
<span id="cb1-17"><a href="exkurs-daten-beschaffen.html#cb1-17" tabindex="-1"></a><span class="co"># API response ansehen</span></span>
<span id="cb1-18"><a href="exkurs-daten-beschaffen.html#cb1-18" tabindex="-1"></a>api_call<span class="sc">$</span>status_code</span>
<span id="cb1-19"><a href="exkurs-daten-beschaffen.html#cb1-19" tabindex="-1"></a>api_call<span class="sc">$</span>content</span>
<span id="cb1-20"><a href="exkurs-daten-beschaffen.html#cb1-20" tabindex="-1"></a><span class="fu">content</span>(api_call, <span class="st">&quot;text&quot;</span>)</span>
<span id="cb1-21"><a href="exkurs-daten-beschaffen.html#cb1-21" tabindex="-1"></a><span class="co"># API Antwort lesbar machen und in einem Dataframe (~Tabelle) speichern</span></span>
<span id="cb1-22"><a href="exkurs-daten-beschaffen.html#cb1-22" tabindex="-1"></a>api_df <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="fu">content</span>(api_call, <span class="st">&quot;text&quot;</span>), <span class="at">simplifyDataFrame =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-23"><a href="exkurs-daten-beschaffen.html#cb1-23" tabindex="-1"></a><span class="co"># Output überprüfen</span></span>
<span id="cb1-24"><a href="exkurs-daten-beschaffen.html#cb1-24" tabindex="-1"></a><span class="fu">View</span>(api_df)</span>
<span id="cb1-25"><a href="exkurs-daten-beschaffen.html#cb1-25" tabindex="-1"></a>api_df<span class="sc">$</span>dramas </span>
<span id="cb1-26"><a href="exkurs-daten-beschaffen.html#cb1-26" tabindex="-1"></a></span>
<span id="cb1-27"><a href="exkurs-daten-beschaffen.html#cb1-27" tabindex="-1"></a><span class="co"># 2. Sprechtexte weiblich und männlich codierter Charaktere aus allen Stücken eine:r bestimmten Autor:in abrufen</span></span>
<span id="cb1-28"><a href="exkurs-daten-beschaffen.html#cb1-28" tabindex="-1"></a><span class="co"># Entweder mithilfe des Zugriffsoperators $ sofort auf alle Stücke der gewählten Autor:in zugreifen</span></span>
<span id="cb1-29"><a href="exkurs-daten-beschaffen.html#cb1-29" tabindex="-1"></a><span class="co"># (in diesem Fall brauchen wir nicht unsere Variable author)</span></span>
<span id="cb1-30"><a href="exkurs-daten-beschaffen.html#cb1-30" tabindex="-1"></a><span class="co"># plays_selected &lt;- api_df$dramas$name[api_df$dramas$author$name == &quot;Goethe, Johann Wolfgang&quot;]</span></span>
<span id="cb1-31"><a href="exkurs-daten-beschaffen.html#cb1-31" tabindex="-1"></a><span class="co"># ... oder erst Namen aller Stücke aus ger-Dracor in einer neuen Variable speichern...</span></span>
<span id="cb1-32"><a href="exkurs-daten-beschaffen.html#cb1-32" tabindex="-1"></a>plays <span class="ot">&lt;-</span> api_df<span class="sc">$</span>dramas<span class="sc">$</span>name</span>
<span id="cb1-33"><a href="exkurs-daten-beschaffen.html#cb1-33" tabindex="-1"></a>plays <span class="co">#überprüfen</span></span>
<span id="cb1-34"><a href="exkurs-daten-beschaffen.html#cb1-34" tabindex="-1"></a><span class="co"># ... und dann nach Stücken der gewählten Autor:in filtern, mithilfe von regex</span></span>
<span id="cb1-35"><a href="exkurs-daten-beschaffen.html#cb1-35" tabindex="-1"></a><span class="co"># (Als pattern wird dann die Variable author eingesetzt, die wir in Zeile 13 erstellt haben)</span></span>
<span id="cb1-36"><a href="exkurs-daten-beschaffen.html#cb1-36" tabindex="-1"></a>plays_selected <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="at">pattern=</span>author, plays, <span class="at">value=</span><span class="cn">TRUE</span>) </span>
<span id="cb1-37"><a href="exkurs-daten-beschaffen.html#cb1-37" tabindex="-1"></a>plays_selected</span>
<span id="cb1-38"><a href="exkurs-daten-beschaffen.html#cb1-38" tabindex="-1"></a><span class="co"># URLs für die Abfrage vorbereiten</span></span>
<span id="cb1-39"><a href="exkurs-daten-beschaffen.html#cb1-39" tabindex="-1"></a>first_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(full_url, <span class="st">&quot;/play/&quot;</span>)</span>
<span id="cb1-40"><a href="exkurs-daten-beschaffen.html#cb1-40" tabindex="-1"></a>second_url <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_chr</span>(plays_selected, paste0, <span class="st">&#39;/spoken-text&#39;</span>)</span>
<span id="cb1-41"><a href="exkurs-daten-beschaffen.html#cb1-41" tabindex="-1"></a>full_urls <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map2_chr</span>(first_url, second_url, paste0)</span>
<span id="cb1-42"><a href="exkurs-daten-beschaffen.html#cb1-42" tabindex="-1"></a><span class="co"># neues Verzeichnis anlegen: in diesem Ordner werden die Textdateien gespeichert</span></span>
<span id="cb1-43"><a href="exkurs-daten-beschaffen.html#cb1-43" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;spokentext_corpus&quot;</span>, <span class="at">showWarnings=</span>F)</span>
<span id="cb1-44"><a href="exkurs-daten-beschaffen.html#cb1-44" tabindex="-1"></a><span class="fu">setwd</span>(<span class="fu">paste0</span>(<span class="fu">getwd</span>(), <span class="st">&quot;/spokentext_corpus&quot;</span>))</span>
<span id="cb1-45"><a href="exkurs-daten-beschaffen.html#cb1-45" tabindex="-1"></a><span class="co"># API calls durchführen und Output speichern</span></span>
<span id="cb1-46"><a href="exkurs-daten-beschaffen.html#cb1-46" tabindex="-1"></a><span class="co"># Zuerst ohne Angabe des codierten Geschlechts als Query-Parameter</span></span>
<span id="cb1-47"><a href="exkurs-daten-beschaffen.html#cb1-47" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(full_urls)){</span>
<span id="cb1-48"><a href="exkurs-daten-beschaffen.html#cb1-48" tabindex="-1"></a>  api_call <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(full_urls[i])</span>
<span id="cb1-49"><a href="exkurs-daten-beschaffen.html#cb1-49" tabindex="-1"></a>  spokentext <span class="ot">&lt;-</span> <span class="fu">content</span>(api_call, <span class="st">&quot;text&quot;</span>)</span>
<span id="cb1-50"><a href="exkurs-daten-beschaffen.html#cb1-50" tabindex="-1"></a>  filename <span class="ot">&lt;-</span> <span class="fu">paste0</span>(plays_selected[i], <span class="st">&quot;.txt&quot;</span>)</span>
<span id="cb1-51"><a href="exkurs-daten-beschaffen.html#cb1-51" tabindex="-1"></a>  <span class="fu">writeLines</span>(spokentext, filename)</span>
<span id="cb1-52"><a href="exkurs-daten-beschaffen.html#cb1-52" tabindex="-1"></a>}</span>
<span id="cb1-53"><a href="exkurs-daten-beschaffen.html#cb1-53" tabindex="-1"></a><span class="co"># Mit query nach dem codierten Geschlecht</span></span>
<span id="cb1-54"><a href="exkurs-daten-beschaffen.html#cb1-54" tabindex="-1"></a>genders <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;FEMALE&quot;</span>, <span class="st">&quot;MALE&quot;</span>, <span class="st">&quot;UNKNOWN&quot;</span>)</span>
<span id="cb1-55"><a href="exkurs-daten-beschaffen.html#cb1-55" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(full_urls)){</span>
<span id="cb1-56"><a href="exkurs-daten-beschaffen.html#cb1-56" tabindex="-1"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(genders)){</span>
<span id="cb1-57"><a href="exkurs-daten-beschaffen.html#cb1-57" tabindex="-1"></a>    api_call <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(full_urls[i], <span class="at">query=</span><span class="fu">list</span>(<span class="at">gender=</span>genders[j]))</span>
<span id="cb1-58"><a href="exkurs-daten-beschaffen.html#cb1-58" tabindex="-1"></a>    spokentext <span class="ot">&lt;-</span> <span class="fu">content</span>(api_call, <span class="st">&quot;text&quot;</span>)</span>
<span id="cb1-59"><a href="exkurs-daten-beschaffen.html#cb1-59" tabindex="-1"></a>    filename <span class="ot">&lt;-</span> <span class="fu">paste</span>(plays_selected[i], genders[j], <span class="st">&quot;.txt&quot;</span>, <span class="at">sep=</span><span class="st">&quot;_&quot;</span>)</span>
<span id="cb1-60"><a href="exkurs-daten-beschaffen.html#cb1-60" tabindex="-1"></a>    <span class="fu">writeLines</span>(spokentext, filename)</span>
<span id="cb1-61"><a href="exkurs-daten-beschaffen.html#cb1-61" tabindex="-1"></a>  }</span>
<span id="cb1-62"><a href="exkurs-daten-beschaffen.html#cb1-62" tabindex="-1"></a>}</span>
<span id="cb1-63"><a href="exkurs-daten-beschaffen.html#cb1-63" tabindex="-1"></a></span>
<span id="cb1-64"><a href="exkurs-daten-beschaffen.html#cb1-64" tabindex="-1"></a><span class="fu">list.files</span>() <span class="co"># Dateien im Arbeitsverzeichnis auflisten</span></span></code></pre></div>
</div>
<div id="beispiel-projekt-gutenberg-web-scraping" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Beispiel Projekt Gutenberg: Web Scraping<a href="exkurs-daten-beschaffen.html#beispiel-projekt-gutenberg-web-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Die Open Source - Volltextdatenbank <a href="https://www.projekt-gutenberg.org">Projekt Gutenberg</a> (nicht zu verwechseln mit dem englischsprachigen <a href="https://www.gutenberg.org/">gutenberg.org</a>) stellt keine API bereit. Dafür ist der Aufbau der Seite unkompliziert und auch mit nur rudimentärem Verständnis von HTML intuitiv verständlich.</p>
<p>Wir machen uns zunächst über die Nutzeroberfläche mit der Funktionalität der Website vertraut. Für uns sind zwei Seiten wichtig: Zum einen die Übersichtsseite über alle Texte. Diese könnten wir verwenden, um eine Liste aller Texte eine:r bestimmten Autor:in zu erstellen. Zum anderen die Seite für ein einzelnes Stück aus unserem gewünschten Korpus. Hier fällt auf, dass die Texte über mehrere Seiten verteilt sind, zwischen denen durch Klicken auf “Weiter” navigiert werden kann.</p>
<p>Anschließend wollen wir uns den Quelltext der beiden relevanten Seiten ansehen. Dazu öffnen wir die Seiten entweder in Firefox oder Chrome und öffnen die Entwicklertools:</p>
<ul>
<li><p><strong>Chrome:</strong> Anzeigen -&gt; Entwickler -&gt; Elemente untersuchen</p></li>
<li><p><strong>Firefox:</strong> ein Seitenelement markieren -&gt; Rechtsklick -&gt; Element untersuchen</p></li>
</ul>
<div class="task">
<p>Verständnisfragen:</p>
<ul>
<li>Welche HTML-Elemente seht ihr? Wo befindet sich der Text, den wir brauchen?</li>
<li>Sucht das HTML-Element, das der Weiter-Button repräsentiert. Wie heißt es?</li>
</ul>
</div>
<p>Zur Übung schreiben wir ein Skript, das den Fließtext aller Werke von Franz Kafka auf projekt-gutenberg.org extrahiert und als Plaintext-Datei im Arbeitsverzeichnis speichert.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="exkurs-daten-beschaffen.html#cb2-1" tabindex="-1"></a><span class="co"># Dieses Skript extrahiert den Fließtext aller Werke von Franz Kafka von projekt-gutenberg.org und </span></span>
<span id="cb2-2"><a href="exkurs-daten-beschaffen.html#cb2-2" tabindex="-1"></a><span class="co"># schreibt jeden Text in eine Datei im Arbeitsverzeichnis</span></span>
<span id="cb2-3"><a href="exkurs-daten-beschaffen.html#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="exkurs-daten-beschaffen.html#cb2-4" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;rvest&quot;</span>, <span class="st">&quot;stringi&quot;</span>, <span class="st">&quot;stringr&quot;</span>, <span class="st">&quot;purrr&quot;</span>))</span>
<span id="cb2-5"><a href="exkurs-daten-beschaffen.html#cb2-5" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb2-6"><a href="exkurs-daten-beschaffen.html#cb2-6" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb2-7"><a href="exkurs-daten-beschaffen.html#cb2-7" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-8"><a href="exkurs-daten-beschaffen.html#cb2-8" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb2-9"><a href="exkurs-daten-beschaffen.html#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="exkurs-daten-beschaffen.html#cb2-10" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/Users/gast/tutorium&quot;</span>)</span>
<span id="cb2-11"><a href="exkurs-daten-beschaffen.html#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="exkurs-daten-beschaffen.html#cb2-12" tabindex="-1"></a><span class="co"># 1. Startseite festlegen</span></span>
<span id="cb2-13"><a href="exkurs-daten-beschaffen.html#cb2-13" tabindex="-1"></a><span class="co"># Zuerst brauchen wir eine Liste aller URLs zu Texten von Kafka auf projekt-gutenberg.org</span></span>
<span id="cb2-14"><a href="exkurs-daten-beschaffen.html#cb2-14" tabindex="-1"></a><span class="co"># Diese finden wir auf der Seite &quot;Alle Werke&quot;:</span></span>
<span id="cb2-15"><a href="exkurs-daten-beschaffen.html#cb2-15" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.projekt-gutenberg.org/info/texte/allworka.html&quot;</span></span>
<span id="cb2-16"><a href="exkurs-daten-beschaffen.html#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="exkurs-daten-beschaffen.html#cb2-17" tabindex="-1"></a><span class="co"># 2. Aus der Liste aller Werke alle Texte von Kafka extrahieren</span></span>
<span id="cb2-18"><a href="exkurs-daten-beschaffen.html#cb2-18" tabindex="-1"></a><span class="co"># Zum Suchen können wir XPath verwenden. Wir öffnen im Browser &quot;Elemente untersuchen&quot; und </span></span>
<span id="cb2-19"><a href="exkurs-daten-beschaffen.html#cb2-19" tabindex="-1"></a><span class="co"># inspizieren den XPath Pfad für uns interessierende Elemente:  </span></span>
<span id="cb2-20"><a href="exkurs-daten-beschaffen.html#cb2-20" tabindex="-1"></a><span class="co"># Rechtsklick auf das Element in den Entwicklertools -&gt; Copy -&gt; Copy full XPath </span></span>
<span id="cb2-21"><a href="exkurs-daten-beschaffen.html#cb2-21" tabindex="-1"></a><span class="co"># XPath-Pfade für ausgewählte Werke inspizieren, um zu entscheiden, wie nach allen Stücken gesucht werden kann : </span></span>
<span id="cb2-22"><a href="exkurs-daten-beschaffen.html#cb2-22" tabindex="-1"></a><span class="co"># /html/body/dl/dt[972] - Autorname Kafka, Franz </span></span>
<span id="cb2-23"><a href="exkurs-daten-beschaffen.html#cb2-23" tabindex="-1"></a><span class="co"># /html/body/dl/dd[4828]/a   - Amerika (erstes Werk)</span></span>
<span id="cb2-24"><a href="exkurs-daten-beschaffen.html#cb2-24" tabindex="-1"></a><span class="co"># /html/body/dl/dd[4829]/a - Aphorismen</span></span>
<span id="cb2-25"><a href="exkurs-daten-beschaffen.html#cb2-25" tabindex="-1"></a><span class="co"># /html/body/dl/dd[4844]/a - Tagebuecher 1910-1923 (letztes Werk)</span></span>
<span id="cb2-26"><a href="exkurs-daten-beschaffen.html#cb2-26" tabindex="-1"></a><span class="co"># /html/body/dl/dt[973] - Autorname Kahane, Arthur</span></span>
<span id="cb2-27"><a href="exkurs-daten-beschaffen.html#cb2-27" tabindex="-1"></a></span>
<span id="cb2-28"><a href="exkurs-daten-beschaffen.html#cb2-28" tabindex="-1"></a><span class="co"># Strategie: Wir können entweder den Index der Elemente nutzen, also alle a-Elemente </span></span>
<span id="cb2-29"><a href="exkurs-daten-beschaffen.html#cb2-29" tabindex="-1"></a><span class="co"># extrahieren, denen ein dd-Element mit den Indexnummern zwischen 4828 und 4844 vorausgeht.</span></span>
<span id="cb2-30"><a href="exkurs-daten-beschaffen.html#cb2-30" tabindex="-1"></a><span class="co"># Oder wir schreiben einen XPath Ausdruck, der alle Elementen zwischen den beiden Autornamen </span></span>
<span id="cb2-31"><a href="exkurs-daten-beschaffen.html#cb2-31" tabindex="-1"></a><span class="co"># findet. Im Forum stackoverflow finden wir diesen XPath-Pfad: </span></span>
<span id="cb2-32"><a href="exkurs-daten-beschaffen.html#cb2-32" tabindex="-1"></a><span class="co"># https://stackoverflow.com/questions/45966049/xpath-get-elements-that-are-between-2-elements-where-we-cant-use-an-id-or-text</span></span>
<span id="cb2-33"><a href="exkurs-daten-beschaffen.html#cb2-33" tabindex="-1"></a><span class="co"># //a[preceding-sibling::b[1]=&#39;Account Detail&#39; and following-sibling::b]</span></span>
<span id="cb2-34"><a href="exkurs-daten-beschaffen.html#cb2-34" tabindex="-1"></a></span>
<span id="cb2-35"><a href="exkurs-daten-beschaffen.html#cb2-35" tabindex="-1"></a><span class="co"># Wie müssten wir den Suchpfad für unsere Suche umschreiben? </span></span>
<span id="cb2-36"><a href="exkurs-daten-beschaffen.html#cb2-36" tabindex="-1"></a><span class="co"># //dd[preceding-sibling::dt[1]=&#39;Kafka,Franz&#39; and following-sibling::dt]/a</span></span>
<span id="cb2-37"><a href="exkurs-daten-beschaffen.html#cb2-37" tabindex="-1"></a><span class="co"># Welche Vor- und Nachteile haben die beiden möglichen Strategien?  </span></span>
<span id="cb2-38"><a href="exkurs-daten-beschaffen.html#cb2-38" tabindex="-1"></a><span class="co"># Wie würden wir vorgehen, wenn uns nicht die Werke von Kafka, sondern alle Werke einer </span></span>
<span id="cb2-39"><a href="exkurs-daten-beschaffen.html#cb2-39" tabindex="-1"></a><span class="co"># bestimmten Textkategorie interessieren würden? Wir könnten alle dd-Elemente extrahieren, </span></span>
<span id="cb2-40"><a href="exkurs-daten-beschaffen.html#cb2-40" tabindex="-1"></a><span class="co"># bei denen mit dem i-Element eine bestimmte Kategegorie angegeben ist. </span></span>
<span id="cb2-41"><a href="exkurs-daten-beschaffen.html#cb2-41" tabindex="-1"></a></span>
<span id="cb2-42"><a href="exkurs-daten-beschaffen.html#cb2-42" tabindex="-1"></a><span class="co"># HTML parsen</span></span>
<span id="cb2-43"><a href="exkurs-daten-beschaffen.html#cb2-43" tabindex="-1"></a>suburls <span class="ot">&lt;-</span> url <span class="sc">%&gt;%</span></span>
<span id="cb2-44"><a href="exkurs-daten-beschaffen.html#cb2-44" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="co"># Klammer optional</span></span>
<span id="cb2-45"><a href="exkurs-daten-beschaffen.html#cb2-45" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//dd[preceding-sibling::dt[1]=&#39;Kafka, Franz&#39; and following-sibling::dt]/a&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-46"><a href="exkurs-daten-beschaffen.html#cb2-46" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) </span>
<span id="cb2-47"><a href="exkurs-daten-beschaffen.html#cb2-47" tabindex="-1"></a>suburls <span class="co"># Links sind noch unvollständig</span></span>
<span id="cb2-48"><a href="exkurs-daten-beschaffen.html#cb2-48" tabindex="-1"></a><span class="co"># Statt ../../ am Anfang müssen wir https://www.projekt-gutenberg.org/ einsetzen: </span></span>
<span id="cb2-49"><a href="exkurs-daten-beschaffen.html#cb2-49" tabindex="-1"></a>suburls <span class="ot">&lt;-</span> suburls <span class="sc">%&gt;%</span></span>
<span id="cb2-50"><a href="exkurs-daten-beschaffen.html#cb2-50" tabindex="-1"></a>  <span class="fu">stri_replace_all_regex</span>(<span class="st">&quot;../../&quot;</span>, <span class="st">&quot;https://www.projekt-gutenberg.org/&quot;</span>) </span>
<span id="cb2-51"><a href="exkurs-daten-beschaffen.html#cb2-51" tabindex="-1"></a>suburls <span class="co"># überprüfen: vollständig!</span></span>
<span id="cb2-52"><a href="exkurs-daten-beschaffen.html#cb2-52" tabindex="-1"></a></span>
<span id="cb2-53"><a href="exkurs-daten-beschaffen.html#cb2-53" tabindex="-1"></a></span>
<span id="cb2-54"><a href="exkurs-daten-beschaffen.html#cb2-54" tabindex="-1"></a><span class="co"># 3. Liste von Dateinamen vorbereiten</span></span>
<span id="cb2-55"><a href="exkurs-daten-beschaffen.html#cb2-55" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> url <span class="sc">%&gt;%</span></span>
<span id="cb2-56"><a href="exkurs-daten-beschaffen.html#cb2-56" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="co"># Klammer optional</span></span>
<span id="cb2-57"><a href="exkurs-daten-beschaffen.html#cb2-57" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//dd[preceding-sibling::dt[1]=&#39;Kafka, Franz&#39; and following-sibling::dt]/a&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-58"><a href="exkurs-daten-beschaffen.html#cb2-58" tabindex="-1"></a>  html_text <span class="sc">%&gt;%</span></span>
<span id="cb2-59"><a href="exkurs-daten-beschaffen.html#cb2-59" tabindex="-1"></a>  <span class="fu">stri_trans_general</span>(<span class="st">&quot;de-ASCII; Latin-ASCII&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Umlaute zu ae, oe, ue, .. konvertieren</span></span>
<span id="cb2-60"><a href="exkurs-daten-beschaffen.html#cb2-60" tabindex="-1"></a>  <span class="fu">map</span>(str_squish) <span class="sc">%&gt;%</span> <span class="co"># wiederholte Leerzeichen entfernen</span></span>
<span id="cb2-61"><a href="exkurs-daten-beschaffen.html#cb2-61" tabindex="-1"></a>  <span class="fu">stri_replace_all_regex</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;-&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-62"><a href="exkurs-daten-beschaffen.html#cb2-62" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="st">&quot;Kafka&quot;</span>, ., <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) </span>
<span id="cb2-63"><a href="exkurs-daten-beschaffen.html#cb2-63" tabindex="-1"></a>filenames </span>
<span id="cb2-64"><a href="exkurs-daten-beschaffen.html#cb2-64" tabindex="-1"></a></span>
<span id="cb2-65"><a href="exkurs-daten-beschaffen.html#cb2-65" tabindex="-1"></a><span class="co"># 4. Text von den einzelnen Seiten der Werke extrahieren und in Dateien schreiben. </span></span>
<span id="cb2-66"><a href="exkurs-daten-beschaffen.html#cb2-66" tabindex="-1"></a><span class="co"># Dazu inspizieren wir zunächst wieder den Quelltext von ein oder zwei Beispielseiten: </span></span>
<span id="cb2-67"><a href="exkurs-daten-beschaffen.html#cb2-67" tabindex="-1"></a><span class="co"># Durch Klick auf den Button &quot;Weiter&quot; öffnet sich jeweils die nächste Seite, auf der </span></span>
<span id="cb2-68"><a href="exkurs-daten-beschaffen.html#cb2-68" tabindex="-1"></a><span class="co"># letzten Seite fehlt dieses Element. </span></span>
<span id="cb2-69"><a href="exkurs-daten-beschaffen.html#cb2-69" tabindex="-1"></a></span>
<span id="cb2-70"><a href="exkurs-daten-beschaffen.html#cb2-70" tabindex="-1"></a><span class="co"># Strategie: Wir können also zum Beispiel einfach von der Startseite ausgehend den Link, der als Attribut &quot;href&quot; </span></span>
<span id="cb2-71"><a href="exkurs-daten-beschaffen.html#cb2-71" tabindex="-1"></a><span class="co"># im a-Element mit dem Text &quot;weiter&amp;nbsp;&gt;&gt;&quot; steht, extrahieren, dann den Text auf der Seite extrahieren, </span></span>
<span id="cb2-72"><a href="exkurs-daten-beschaffen.html#cb2-72" tabindex="-1"></a><span class="co"># mit dem Text der vorherigen Seiten zusammenfügen und dann wieder wie zuvor auf die nächste Seite wechseln. </span></span>
<span id="cb2-73"><a href="exkurs-daten-beschaffen.html#cb2-73" tabindex="-1"></a><span class="co"># Das können wir so lange machen, bis kein a-Element mit dem Text &quot;weiter&amp;nbsp;&gt;&gt;&quot; mehr gefunden wird. </span></span>
<span id="cb2-74"><a href="exkurs-daten-beschaffen.html#cb2-74" tabindex="-1"></a><span class="co"># Alternativ könnten wir aber auch einfach die Liste aller Textseiten auf der Seite &quot;Inhaltsverzeichnis&quot; nutzen, </span></span>
<span id="cb2-75"><a href="exkurs-daten-beschaffen.html#cb2-75" tabindex="-1"></a><span class="co"># um direkt eine Liste aller Kapitel zu bekommen, die wir parsen können. Diese Strategie erscheint vorteilhaft. </span></span>
<span id="cb2-76"><a href="exkurs-daten-beschaffen.html#cb2-76" tabindex="-1"></a><span class="co"># Das Inhaltsverzeichnis befindet sich immer auf einer Seite mit dem Zusatz &quot;index.html&quot;: </span></span>
<span id="cb2-77"><a href="exkurs-daten-beschaffen.html#cb2-77" tabindex="-1"></a><span class="co"># https://www.projekt-gutenberg.org/kafka/tagebuch/index.html</span></span>
<span id="cb2-78"><a href="exkurs-daten-beschaffen.html#cb2-78" tabindex="-1"></a><span class="co"># https://www.projekt-gutenberg.org/kafka/amerika/index.html</span></span>
<span id="cb2-79"><a href="exkurs-daten-beschaffen.html#cb2-79" tabindex="-1"></a><span class="co"># Wir können also die Liste der suburls nocheinmal bearbeiten, indem wir die URLs jeweils bis zum letzten &#39;/&#39;</span></span>
<span id="cb2-80"><a href="exkurs-daten-beschaffen.html#cb2-80" tabindex="-1"></a><span class="co"># kürzen und &quot;index.html&quot; anfügen. Hierzu können wir die Funktion dirname() verwenden: </span></span>
<span id="cb2-81"><a href="exkurs-daten-beschaffen.html#cb2-81" tabindex="-1"></a>?dirname</span>
<span id="cb2-82"><a href="exkurs-daten-beschaffen.html#cb2-82" tabindex="-1"></a></span>
<span id="cb2-83"><a href="exkurs-daten-beschaffen.html#cb2-83" tabindex="-1"></a>suburls <span class="ot">&lt;-</span> suburls <span class="sc">%&gt;%</span></span>
<span id="cb2-84"><a href="exkurs-daten-beschaffen.html#cb2-84" tabindex="-1"></a>  <span class="fu">dirname</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-85"><a href="exkurs-daten-beschaffen.html#cb2-85" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">&quot;/index.html&quot;</span>) </span>
<span id="cb2-86"><a href="exkurs-daten-beschaffen.html#cb2-86" tabindex="-1"></a>suburls <span class="co"># überprüfen</span></span>
<span id="cb2-87"><a href="exkurs-daten-beschaffen.html#cb2-87" tabindex="-1"></a></span>
<span id="cb2-88"><a href="exkurs-daten-beschaffen.html#cb2-88" tabindex="-1"></a><span class="co"># Jetzt können wir zum Beispiel eine Schleife konstruieren, um über die Liste der Inhaltsverzeichnis-Seiten </span></span>
<span id="cb2-89"><a href="exkurs-daten-beschaffen.html#cb2-89" tabindex="-1"></a><span class="co"># zu iterieren und für jede Seite eine Liste aller Unterseiten zu extrahieren, die wir dann parsen können. </span></span>
<span id="cb2-90"><a href="exkurs-daten-beschaffen.html#cb2-90" tabindex="-1"></a><span class="co"># Hier könnten wir zum Beispiel auch die Titelseite herauslassen, falls wir diese nicht benötigen. </span></span>
<span id="cb2-91"><a href="exkurs-daten-beschaffen.html#cb2-91" tabindex="-1"></a><span class="co"># Für unseren Anwendungsfall brauchen wir nur den reinen Fließtext und also weder Titel noch Kapitelüberschriften. </span></span>
<span id="cb2-92"><a href="exkurs-daten-beschaffen.html#cb2-92" tabindex="-1"></a><span class="co"># Der Code aus der Schleife kann zunächst an einem Beispieltext getestet werden.</span></span>
<span id="cb2-93"><a href="exkurs-daten-beschaffen.html#cb2-93" tabindex="-1"></a></span>
<span id="cb2-94"><a href="exkurs-daten-beschaffen.html#cb2-94" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(suburls)) {    </span>
<span id="cb2-95"><a href="exkurs-daten-beschaffen.html#cb2-95" tabindex="-1"></a>  </span>
<span id="cb2-96"><a href="exkurs-daten-beschaffen.html#cb2-96" tabindex="-1"></a>  werk <span class="ot">&lt;-</span> suburls[i] </span>
<span id="cb2-97"><a href="exkurs-daten-beschaffen.html#cb2-97" tabindex="-1"></a>  <span class="co"># URL bis &quot;index.html&quot; extrahieren</span></span>
<span id="cb2-98"><a href="exkurs-daten-beschaffen.html#cb2-98" tabindex="-1"></a>  werkdir <span class="ot">&lt;-</span> <span class="fu">dirname</span>(werk)</span>
<span id="cb2-99"><a href="exkurs-daten-beschaffen.html#cb2-99" tabindex="-1"></a>  <span class="co"># Liste von URLs von der Seite &quot;Inhalt&quot; extrahieren</span></span>
<span id="cb2-100"><a href="exkurs-daten-beschaffen.html#cb2-100" tabindex="-1"></a>  inhalturls <span class="ot">&lt;-</span> werk <span class="sc">%&gt;%</span></span>
<span id="cb2-101"><a href="exkurs-daten-beschaffen.html#cb2-101" tabindex="-1"></a>    <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2-102"><a href="exkurs-daten-beschaffen.html#cb2-102" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//html/body/ul/li[position()&gt;=1]/a&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Titelseite herausfildern: position()&gt;1 schließt erstes Element aus</span></span>
<span id="cb2-103"><a href="exkurs-daten-beschaffen.html#cb2-103" tabindex="-1"></a>    <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-104"><a href="exkurs-daten-beschaffen.html#cb2-104" tabindex="-1"></a>    <span class="fu">stri_c</span>(werkdir, <span class="st">&quot;/&quot;</span>, .) <span class="sc">%&gt;%</span> <span class="co"># . ist ein Platzhalter für den Input und kann verwendet werden, um die Reihenfolge der zusammengefügten Strings zu ändern</span></span>
<span id="cb2-105"><a href="exkurs-daten-beschaffen.html#cb2-105" tabindex="-1"></a>    <span class="fu">discard</span>(is.na) <span class="co"># Fehler vorbeugen: im Fall eines Textes war das Inhaltsverzeichnis falsch aufgebaut, sodass ein NA-Element in der Liste war</span></span>
<span id="cb2-106"><a href="exkurs-daten-beschaffen.html#cb2-106" tabindex="-1"></a>  <span class="co"># Text aller Seiten in der Liste extrahieren: </span></span>
<span id="cb2-107"><a href="exkurs-daten-beschaffen.html#cb2-107" tabindex="-1"></a>  seitentext <span class="ot">&lt;-</span> inhalturls <span class="sc">%&gt;%</span></span>
<span id="cb2-108"><a href="exkurs-daten-beschaffen.html#cb2-108" tabindex="-1"></a>    <span class="fu">map</span>(read_html) <span class="sc">%&gt;%</span> </span>
<span id="cb2-109"><a href="exkurs-daten-beschaffen.html#cb2-109" tabindex="-1"></a>    <span class="fu">map</span>(html_nodes, <span class="at">xpath =</span> <span class="st">&quot;//p&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-110"><a href="exkurs-daten-beschaffen.html#cb2-110" tabindex="-1"></a>    <span class="fu">map</span>(html_text) <span class="sc">%&gt;%</span></span>
<span id="cb2-111"><a href="exkurs-daten-beschaffen.html#cb2-111" tabindex="-1"></a>    unlist</span>
<span id="cb2-112"><a href="exkurs-daten-beschaffen.html#cb2-112" tabindex="-1"></a>  <span class="co"># Extrahierte Texte in einen langen Text zusammenfügen</span></span>
<span id="cb2-113"><a href="exkurs-daten-beschaffen.html#cb2-113" tabindex="-1"></a>  werktext <span class="ot">&lt;-</span> <span class="fu">paste</span>(seitentext, <span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb2-114"><a href="exkurs-daten-beschaffen.html#cb2-114" tabindex="-1"></a>  <span class="co"># Dateiname festlegen</span></span>
<span id="cb2-115"><a href="exkurs-daten-beschaffen.html#cb2-115" tabindex="-1"></a>  filename <span class="ot">&lt;-</span> filenames[i]</span>
<span id="cb2-116"><a href="exkurs-daten-beschaffen.html#cb2-116" tabindex="-1"></a>  <span class="co"># werktext in eine txt-Datei schreiben und im Arbeitsverzeichnis speichern</span></span>
<span id="cb2-117"><a href="exkurs-daten-beschaffen.html#cb2-117" tabindex="-1"></a>  <span class="fu">write.table</span>(werktext, </span>
<span id="cb2-118"><a href="exkurs-daten-beschaffen.html#cb2-118" tabindex="-1"></a>              <span class="at">file =</span> <span class="fu">paste</span>(filename, <span class="st">&quot;.txt&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>), </span>
<span id="cb2-119"><a href="exkurs-daten-beschaffen.html#cb2-119" tabindex="-1"></a>              <span class="at">quote=</span><span class="cn">FALSE</span>,</span>
<span id="cb2-120"><a href="exkurs-daten-beschaffen.html#cb2-120" tabindex="-1"></a>              <span class="at">col.names=</span><span class="cn">FALSE</span>,</span>
<span id="cb2-121"><a href="exkurs-daten-beschaffen.html#cb2-121" tabindex="-1"></a>              <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb2-122"><a href="exkurs-daten-beschaffen.html#cb2-122" tabindex="-1"></a>  </span>
<span id="cb2-123"><a href="exkurs-daten-beschaffen.html#cb2-123" tabindex="-1"></a>}</span></code></pre></div>
<p>Anfang des Semesters haben wir bereits besprochen, dass Schleifen und andere Kontrollstrukturen in Programmiersprachen wie Python eine große Rolle spielen, in R jedoch als weniger elegante Lösung gelten. Das liegt daran, dass R ursprünglich für die sogenannte <a href="https://de.wikipedia.org/wiki/Funktionale_Programmierung">funktionale Programmierung</a> konzipiert ist. Das Webscraping-Skript kann so umgeschrieben werden, dass es einem funktionalen Paradigma folgt:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="exkurs-daten-beschaffen.html#cb3-1" tabindex="-1"></a><span class="co"># In unserem ersten Wikisource-Scraper haben wir eine for-Schleife verwendet, um die Ausführung</span></span>
<span id="cb3-2"><a href="exkurs-daten-beschaffen.html#cb3-2" tabindex="-1"></a><span class="co"># von unserem Code zu kontrollieren: Unsere Schleife ist über eine Liste von suburls iteriert </span></span>
<span id="cb3-3"><a href="exkurs-daten-beschaffen.html#cb3-3" tabindex="-1"></a><span class="co"># und jedes Mal wurden Befehle aus dem Schleifenkörper ausgeführt. Während for-loops und andere </span></span>
<span id="cb3-4"><a href="exkurs-daten-beschaffen.html#cb3-4" tabindex="-1"></a><span class="co"># Kontrollstrukturen in Programmiersprachen wie Python sehr wichtig sind, ist R eigentlich nicht </span></span>
<span id="cb3-5"><a href="exkurs-daten-beschaffen.html#cb3-5" tabindex="-1"></a><span class="co"># für diesen Programmierstil konzipiert. Das bedeutet, dass Schleifen zwar verwendet werden </span></span>
<span id="cb3-6"><a href="exkurs-daten-beschaffen.html#cb3-6" tabindex="-1"></a><span class="co"># können, aber das resultiert oft in einer längeren Laufzeit und wird allgemein als eine weniger </span></span>
<span id="cb3-7"><a href="exkurs-daten-beschaffen.html#cb3-7" tabindex="-1"></a><span class="co"># elegante Lösung angesehen. R ist stattdessen für die sogenannte funktionale Programmierung </span></span>
<span id="cb3-8"><a href="exkurs-daten-beschaffen.html#cb3-8" tabindex="-1"></a><span class="co"># optimiert. Funktionale Programmierung ist ein Programmierparadigma, das auf Funktionen anstelle </span></span>
<span id="cb3-9"><a href="exkurs-daten-beschaffen.html#cb3-9" tabindex="-1"></a><span class="co"># einer Abfolge von Befehlen setzt, um Aufgaben auszuführen. Siehe auch: https://en.wikipedia.org/wiki/Functional_programming </span></span>
<span id="cb3-10"><a href="exkurs-daten-beschaffen.html#cb3-10" tabindex="-1"></a></span>
<span id="cb3-11"><a href="exkurs-daten-beschaffen.html#cb3-11" tabindex="-1"></a><span class="co"># Dieses Skript illustriert, wie ein funktionaler Ansatz für einen Wikisource-scraper aussehen könnte. </span></span>
<span id="cb3-12"><a href="exkurs-daten-beschaffen.html#cb3-12" tabindex="-1"></a><span class="co"># Dazu wird mehrfach die Funktion map() aus dem purrr Paket verwendet, um die Schleife zu ersetzen. </span></span>
<span id="cb3-13"><a href="exkurs-daten-beschaffen.html#cb3-13" tabindex="-1"></a><span class="co"># Für mehr Informationen zu purrr und map() siehe auch https://purrr.tidyverse.org/index.html und </span></span>
<span id="cb3-14"><a href="exkurs-daten-beschaffen.html#cb3-14" tabindex="-1"></a><span class="co"># https://b-rodrigues.github.io/modern_R/functional-programming.html#functional-programming-with-purrr</span></span>
<span id="cb3-15"><a href="exkurs-daten-beschaffen.html#cb3-15" tabindex="-1"></a></span>
<span id="cb3-16"><a href="exkurs-daten-beschaffen.html#cb3-16" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;rvest&quot;</span>)</span>
<span id="cb3-17"><a href="exkurs-daten-beschaffen.html#cb3-17" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;stringi&quot;</span>)</span>
<span id="cb3-18"><a href="exkurs-daten-beschaffen.html#cb3-18" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;purrr&quot;</span>)</span>
<span id="cb3-19"><a href="exkurs-daten-beschaffen.html#cb3-19" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb3-20"><a href="exkurs-daten-beschaffen.html#cb3-20" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb3-21"><a href="exkurs-daten-beschaffen.html#cb3-21" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb3-22"><a href="exkurs-daten-beschaffen.html#cb3-22" tabindex="-1"></a></span>
<span id="cb3-23"><a href="exkurs-daten-beschaffen.html#cb3-23" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/Users/gast/tutorium&quot;</span>)</span>
<span id="cb3-24"><a href="exkurs-daten-beschaffen.html#cb3-24" tabindex="-1"></a></span>
<span id="cb3-25"><a href="exkurs-daten-beschaffen.html#cb3-25" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://de.wikisource.org/wiki/Kinder-_und_Hausm%C3%A4rchen&quot;</span></span>
<span id="cb3-26"><a href="exkurs-daten-beschaffen.html#cb3-26" tabindex="-1"></a></span>
<span id="cb3-27"><a href="exkurs-daten-beschaffen.html#cb3-27" tabindex="-1"></a><span class="co"># HTML parsen und Links extrahieren</span></span>
<span id="cb3-28"><a href="exkurs-daten-beschaffen.html#cb3-28" tabindex="-1"></a>suburls <span class="ot">&lt;-</span> url <span class="sc">%&gt;%</span></span>
<span id="cb3-29"><a href="exkurs-daten-beschaffen.html#cb3-29" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> <span class="co"># Klammer optional</span></span>
<span id="cb3-30"><a href="exkurs-daten-beschaffen.html#cb3-30" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">&quot;//div[1]/table[2]/tbody/tr/td[position()&gt;1]/a&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-31"><a href="exkurs-daten-beschaffen.html#cb3-31" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-32"><a href="exkurs-daten-beschaffen.html#cb3-32" tabindex="-1"></a>  <span class="fu">stri_paste</span>(<span class="st">&quot;https://de.wikisource.org&quot;</span>, .)</span>
<span id="cb3-33"><a href="exkurs-daten-beschaffen.html#cb3-33" tabindex="-1"></a><span class="fu">head</span>(suburls)</span>
<span id="cb3-34"><a href="exkurs-daten-beschaffen.html#cb3-34" tabindex="-1"></a></span>
<span id="cb3-35"><a href="exkurs-daten-beschaffen.html#cb3-35" tabindex="-1"></a><span class="co"># Text zwischen paragraph-tags (&lt;p&gt;&lt;/p&gt;) extrahieren</span></span>
<span id="cb3-36"><a href="exkurs-daten-beschaffen.html#cb3-36" tabindex="-1"></a><span class="co"># map() nimmt eine Liste und eine Funktion als Input und wendet die Funktion auf jedes Listenelement</span></span>
<span id="cb3-37"><a href="exkurs-daten-beschaffen.html#cb3-37" tabindex="-1"></a><span class="co"># an. In diesem Fall nimmt beispielsweise map(html_nodes, .. ) eine Liste HTML-Dokumente als Input </span></span>
<span id="cb3-38"><a href="exkurs-daten-beschaffen.html#cb3-38" tabindex="-1"></a><span class="co"># und gitb eine Liste zurück, bei der jedes Element wiederum eine Liste von &lt;p&gt;-Elementen aus dem </span></span>
<span id="cb3-39"><a href="exkurs-daten-beschaffen.html#cb3-39" tabindex="-1"></a><span class="co"># Input-HTML-Dokument enhält. </span></span>
<span id="cb3-40"><a href="exkurs-daten-beschaffen.html#cb3-40" tabindex="-1"></a>maerchentexte <span class="ot">&lt;-</span> suburls <span class="sc">%&gt;%</span></span>
<span id="cb3-41"><a href="exkurs-daten-beschaffen.html#cb3-41" tabindex="-1"></a>  <span class="fu">map</span>(read_html) <span class="sc">%&gt;%</span></span>
<span id="cb3-42"><a href="exkurs-daten-beschaffen.html#cb3-42" tabindex="-1"></a>  <span class="fu">map</span>(html_nodes, <span class="at">xpath =</span> <span class="st">&quot;//p[not(preceding::h2)]&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-43"><a href="exkurs-daten-beschaffen.html#cb3-43" tabindex="-1"></a>  <span class="fu">map</span>(html_text) </span>
<span id="cb3-44"><a href="exkurs-daten-beschaffen.html#cb3-44" tabindex="-1"></a><span class="fu">typeof</span>(maerchentexte) <span class="co"># output ist Liste von Listen</span></span>
<span id="cb3-45"><a href="exkurs-daten-beschaffen.html#cb3-45" tabindex="-1"></a>maerchentexte[<span class="dv">1</span>]</span>
<span id="cb3-46"><a href="exkurs-daten-beschaffen.html#cb3-46" tabindex="-1"></a></span>
<span id="cb3-47"><a href="exkurs-daten-beschaffen.html#cb3-47" tabindex="-1"></a><span class="co"># Dateinamen erstellen, wieder mithilfe der map()-Funktion</span></span>
<span id="cb3-48"><a href="exkurs-daten-beschaffen.html#cb3-48" tabindex="-1"></a>filenames <span class="ot">&lt;-</span> suburls <span class="sc">%&gt;%</span></span>
<span id="cb3-49"><a href="exkurs-daten-beschaffen.html#cb3-49" tabindex="-1"></a>  <span class="fu">map</span>(basename) <span class="sc">%&gt;%</span> <span class="co"># Anfang der URL entfernen</span></span>
<span id="cb3-50"><a href="exkurs-daten-beschaffen.html#cb3-50" tabindex="-1"></a>  <span class="fu">map</span>(URLdecode) <span class="sc">%&gt;%</span> <span class="co"># URL dekodieren</span></span>
<span id="cb3-51"><a href="exkurs-daten-beschaffen.html#cb3-51" tabindex="-1"></a>  <span class="fu">stri_trans_general</span>(<span class="st">&quot;de-ASCII; Latin-ASCII&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># ä,ö,ü zu ae, oe, ue konvertieren</span></span>
<span id="cb3-52"><a href="exkurs-daten-beschaffen.html#cb3-52" tabindex="-1"></a>  <span class="fu">stri_paste</span>(<span class="st">&quot;.txt&quot;</span>) </span>
<span id="cb3-53"><a href="exkurs-daten-beschaffen.html#cb3-53" tabindex="-1"></a><span class="fu">head</span>(filenames) </span>
<span id="cb3-54"><a href="exkurs-daten-beschaffen.html#cb3-54" tabindex="-1"></a></span>
<span id="cb3-55"><a href="exkurs-daten-beschaffen.html#cb3-55" tabindex="-1"></a></span>
<span id="cb3-56"><a href="exkurs-daten-beschaffen.html#cb3-56" tabindex="-1"></a><span class="co"># Jedes Element der maerchentexte-Liste in eine txt-Datei schreiben und im Arbeitsverzeichnis </span></span>
<span id="cb3-57"><a href="exkurs-daten-beschaffen.html#cb3-57" tabindex="-1"></a><span class="co"># speichern. Die Funktion walk2() ist ähnlich wie map(), aber nimmt zwei Elemente anstatt nur </span></span>
<span id="cb3-58"><a href="exkurs-daten-beschaffen.html#cb3-58" tabindex="-1"></a><span class="co"># einem sowie eine Funktion als Input. Sie greift parallel auf beide Listen zu und wendet die </span></span>
<span id="cb3-59"><a href="exkurs-daten-beschaffen.html#cb3-59" tabindex="-1"></a><span class="co"># Funktion, in diesem Fall write.table() auf beide Listen an. Das heißt, dass in jedem Schritt</span></span>
<span id="cb3-60"><a href="exkurs-daten-beschaffen.html#cb3-60" tabindex="-1"></a><span class="co"># ein Element maerchentexte[i] und ein Element filenames[i] an die Funktion übergeben wird. </span></span>
<span id="cb3-61"><a href="exkurs-daten-beschaffen.html#cb3-61" tabindex="-1"></a><span class="co"># Beide Listen müssen deswegen dieselbe Länge haben. </span></span>
<span id="cb3-62"><a href="exkurs-daten-beschaffen.html#cb3-62" tabindex="-1"></a><span class="fu">walk2</span>(maerchentexte, filenames, write.table, <span class="at">quote=</span>F, <span class="at">col.names=</span>F, <span class="at">row.names=</span>F)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="word-embeddings-und-ner.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"toc_depth": 4
});
});
</script>

</body>

</html>
